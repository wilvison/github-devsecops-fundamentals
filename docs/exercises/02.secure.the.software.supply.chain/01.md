# :test_tube: Revis√£o de Depend√™ncias

<!-- markdownlint-disable MD033 MD046 -->

!!! quote ":octicons-milestone-16: Adicionar Verifica√ß√µes de Seguran√ßa"

    > A revis√£o de depend√™ncias ajuda voc√™ a entender as mudan√ßas nas depend√™ncias e o impacto de seguran√ßa dessas mudan√ßas em cada pull request. Ela fornece uma visualiza√ß√£o facilmente compreens√≠vel das altera√ß√µes de depend√™ncias com um diff detalhado na guia "Arquivos Alterados" de um pull request. A revis√£o de depend√™ncias informa voc√™ sobre:

    > - Quais depend√™ncias foram adicionadas, removidas ou atualizadas, juntamente com as datas de lan√ßamento.
    > - Quantos projetos usam esses componentes.
    > - Dados de vulnerabilidade para essas depend√™ncias.

    ![Revisar depend√™ncia](../../assets/img/dependency-review-milestone.png)

---

## Exerc√≠cio: Automatizar a Aplica√ß√£o da Revis√£o de Depend√™ncias

---

### **:material-numeric-1-circle: Entender as Configura√ß√µes da Revis√£o de Depend√™ncias**

```yaml title=".github/dependency-review-config.yml"
fail-on-severity: moderate #(1)!

comment-summary-in-pr: always #(2)!

allow-licenses: #(3)!
  - MIT
  - GPL-3.0
  - BSD-3-Clause

deny-licenses: #(4)!
  - LGPL-2.0
  - BSD-2-Clause

allow-ghsas: #(5)!
  - GHSA-abcd-1234-5679
  - GHSA-efgh-1234-5679

fail-on-scopes: #(6)!
  - development
  - runtime
  - unknown
```

1. Valores poss√≠veis: "critical", "high", "moderate", "low"
2. Publicar resumo como um coment√°rio no respectivo pull request
3. Permitir apenas as licen√ßas listadas (opcional). Valores poss√≠veis: Quaisquer valores `spdx_id` de https://docs.github.com/pt/rest/licenses
4. Bloquear o pull request nestas licen√ßas (opcional). Valores poss√≠veis: Quaisquer valores `spdx_id` de https://docs.github.com/pt/rest/licenses

    :warning: Voc√™ s√≥ pode incluir uma dessas duas op√ß√µes: `allow-licenses` e `deny-licenses`.

5. Ignorar esses IDs do Banco de Dados de Avisos do GitHub durante a detec√ß√£o (opcional). Valores poss√≠veis: Qualquer ID v√°lido do Banco de Dados de Avisos do GitHub de https://github.com/advisories
6. Bloquear pull requests que introduzem vulnerabilidades nos escopos que correspondem a esta lista (opcional). Valores poss√≠veis: "development", "runtime", "unknown"

---

### **:material-numeric-2-circle: Implementar Verifica√ß√£o de Revis√£o de Depend√™ncias**

Abra o arquivo `.github/workflows/continuous.integration.yml` no editor e adicione o conte√∫do {== destacado ==} da seguinte forma:

```yaml title=".github/workflows/continuous.integration.yml" linenums="1" hl_lines="58-67"
--8<-- "reference.implementations/workflows/1.2.continuous.integration.yml"
```
##### An√°lise

- **Linhas `58 - 67`**

    Estamos utilizando o *dependency-review-action@v4* configurado pelo arquivo *dependency-review-config.yml*.
    Foi adicionado no rodap√© desta pagina recursos para facilitar o endentimento mais aprofundado.
---

### **:material-numeric-2-circle: Fazer commit e publicar suas altera√ß√µes**

Enviar suas altera√ß√µes aplicar√° a verifica√ß√£o no pull request existente.

!!! tip "Voc√™ pode vincular suas altera√ß√µes a uma issue"

    Lembre-se da issue que voc√™ criou anteriormente e seu respectivo n√∫mero, voc√™ o usar√° para vincular suas altera√ß√µes atuais √† issue.

```bash linenums="1"
git add .
git commit -m "$(printf 'Criar um jogo de tetris para impulsionar o engajamento do site\n\n-Adicionar revis√£o de depend√™ncias como verifica√ß√£o de seguran√ßa\n\n- Resolve #<N√öMERO-DA-ISSUE>')"
git push origin feature/tetris-game
```

{==

Quando voc√™ navegar at√© o reposit√≥rio no GitHub e abrir o pull request existente, poder√° confirmar que a verifica√ß√£o foi executada. Como n√£o h√° viola√ß√µes de conformidade atualmente no PR, a verifica√ß√£o √© bem-sucedida.

![Mostrar resultado da revis√£o de depend√™ncias](../../assets/img/dependency-review-outcome-01.png)

==}

!!! question "Tarefa para casa"

    Voc√™ consegue tentar fazer com que a verifica√ß√£o de revis√£o de depend√™ncias falhe?

---

## üìö Recursos

- [Entendendo sua cadeia de suprimentos de software](https://docs.github.com/pt/code-security/supply-chain-security/understanding-your-software-supply-chain)
- [GitHub Advanced Security - Gr√°fico de Depend√™ncias](https://docs.github.com/pt/code-security/supply-chain-security/understanding-your-software-supply-chain/about-the-dependency-graph)
- [Dependency Review Action - Link no Marketplace](https://github.com/marketplace/actions/dependency-review)
- [Dependency Review Action - Documenta√ß√£o Oficial](https://docs.github.com/en/code-security/supply-chain-security/understanding-your-software-supply-chain/about-dependency-review)
- [Dependency Review Action - Exemplos de Uso](https://github.com/actions/dependency-review-action/blob/main/docs/examples.md)
